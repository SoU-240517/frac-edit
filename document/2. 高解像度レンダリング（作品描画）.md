[[機能要求書]]
***

本仕様は、編集時の簡易描画とは別に、印刷や展示など品質を重視した最終作品として出力するための高解像度レンダリング処理について記述します。ユーザーが「作品描画」ボタン（パラメーターパネルに配置）を操作することで、最適なパラメータ設定を経て超高精細な画像が生成されます。

---

## 2-1. 超高解像度出力

- **概要:**  
    キャンバス上の簡易描画とは異なり、フラクタルの微細な部分まで詳細に描写する高解像度画像を生成します。  
    ・全サンプル（または高密度サンプル）を用いたフルサンプリング  
    ・高精度計算による反復回数や色彩計算の最適化  
    ・並列処理（マルチスレッド/GPUシェーダ）の活用による高速処理
    
- **処理タイミング:**  
    常時は簡易描画、パラメータパネル内の「作品描画」ボタン押下後に高解像度レンダリングが実行されます。
    
- **ユーザー通知:**  
    処理開始時にプログレスバーやローディングインジケーターで進捗状況を表示し、完了後にプレビュー表示または保存ダイアログで結果を提示します。
    

---

## 2-2. パラメータパネル内の「作品描画」ボタンおよび処理フロー

### 作品描画の処理の流れ

1. **作品描画ボタンの押下:**  
    ユーザーがパラメータパネル内の「作品描画」ボタンをクリックします。
    
2. **パラメータ・保存設定ダイアログの表示:**  
    1画面内で以下の2つの設定を統合して指定できるダイアログを表示します。
    
    - **描画パラメータ（Apophysis参照）**
        - **Quality:** 描画品質のレベル（例：低～高）を指定
        - **Filter Radius:** フィルターの半径（ノイズ除去や補正に使用）
        - **Oversample:** オーバーサンプリングの倍率を指定
    - **エクスポート設定**
        - **保存場所:** 出力ファイルの保存先を指定
        - **ファイル名:** 保存する際のファイル名
        - **ファイル形式:** JPEG／PNG／TIFFなどの選択
        - **背景透過選択:** 選択したファイル形式に応じ、背景透過の有無（PNGの場合など）のオプション
3. **設定内容の確定:**  
    ダイアログ内の「OK」ボタンを押下すると、上記の描画パラメータとエクスポート設定が確定されます。  
    ※ボタン押下時、設定内容に不備があればエラーメッセージを表示して修正を促します。
    
4. **高解像度レンダリング処理の開始:**  
    設定内容が確定後、内部で高解像度レンダリングの処理が開始されます。  
	    ・プログレスバーやローディングインジケーターで進捗状況を表示しながら処理を実行します。  
    ・処理完了後、生成された画像のプレビューまたは直接保存が行われ、ユーザーに完了通知を行います。
    

### 配置とデザイン

- **ボタン:**  
    パラメータパネル内の目立つ位置に「作品描画」ボタンを配置し、状態（有効/無効）の切替が視覚的に認識できるようにします。
    
- **ダイアログ:**  
    上記のパラメータ指定とエクスポート設定を1画面で行えるよう、タブやセクション分けなどで分かりやすいUI設計を行います。
    
- **操作中のフィードバック:**  
    ボタン押下後は、処理中であることを明示するためにボタンを一時無効化し、ダイアログ内またはキャンバス周辺に進捗状況を示す表示を行います。
    

---

## 2-3. 様々なファイル形式でのエクスポート

- **サポートするファイル形式:**
    - **JPEG:** 圧縮率や画質設定が可能
    - **PNG:** 可逆圧縮、透過情報の保持が可能
    - **TIFF:** 印刷や展示に適した高精度なカラーデータを保存可能

- **エクスポート設定:**  
    ダイアログ内でユーザーが各形式に応じたオプション（JPEGの画質、TIFFの圧縮オプション、背景透過の有無など）を設定できるようにします。
    
- **品質と互換性:**  
    出力ファイルは、印刷や展示用途に耐えうる色深度・解像度が保証され、ファイルサイズと品質の最適なバランスが図られます。
    

---
