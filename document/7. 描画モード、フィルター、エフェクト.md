[[機能要求書]]
***

### 7.1. 描画モード

- **概要:**  
  描画モードは、フラクタル描画の全体または特定の範囲に対して、色の合成方法を変更する機能です。これにより、フラクタルの色彩をより豊かに表現し、作品に深みや立体感を加えることができます。

- **サポートする描画モード:**  
  - **乗算:** フラクタルの色と背景色を乗算し、暗い部分を強調します。  
  - **焼き込み:** フラクタルの色を背景に焼き込み、コントラストを高めます。  
  - **覆い焼き:** フラクタルの色を背景に覆い焼き、明るい部分を強調します。  
  - **オーバーレイ:** フラクタルの色と背景色をオーバーレイし、コントラストを調整します。  
  - **ソフトライト:** 柔らかな光をシミュレートし、フラクタルの色を背景にソフトに合成します。  
  - **ハードライト:** 強い光をシミュレートし、フラクタルの色を背景にハードに合成します。  
  - **ビビッドライト:** 鮮やかな光をシミュレートし、色の鮮やかさを強調します。  
  - **リニアライト:** 線形の光をシミュレートし、明るさとコントラストを調整します。  
  - **ピンライト:** ピンライト効果を適用し、色の極端な部分を強調します。

- **選択方法:**  
  - パラメータパネル内に「描画モード」セクションを設け、ドロップダウンリストからモードを選択できます。  
  - 選択したモードは、即時にキャンバスの描画に反映されます。

- **適用範囲:**  
  - デフォルトでは、フラクタル全体に適用されますが、将来的には特定の範囲（例：選択領域）への適用も検討します。

---
### 7.2. フィルター

- **概要:**  
  フィルターは、フラクタル描画の全体または特定の範囲に対して、画像処理効果を適用する機能です。これにより、フラクタルの質感や雰囲気を調整し、作品の完成度を高めることができます。

- **サポートするフィルター:**  
  - **ノイズ:** ランダムなノイズを追加し、質感を変化させます。  
  - **シャープ化:** フラクタルの輪郭を強調し、鮮明さを高めます。  
  - **ぼかし:** フラクタルの輪郭を柔らかくし、滑らかな印象を与えます。  
  - **エンボス:** エンボス効果を適用し、立体感を演出します。  
  - **輪郭検出:** フラクタルの輪郭を検出し、強調します。

- **選択と調整方法:**  
  - パラメータパネル内に「フィルター」セクションを設け、ドロップダウンリストからフィルターを選択できます。  
  - 選択したフィルターに応じて、必要なパラメータ（例：ノイズの強度、ぼかしの半径）が動的に表示され、ユーザーがスライダーや入力フィールドで調整可能です。  
  - フィルターの効果は、即時にキャンバスの描画に反映されます。

- **適用範囲:**  
  - デフォルトでは、フラクタル全体に適用されますが、将来的には特定の範囲（例：選択領域）への適用も検討します。

---
### 7.3. エフェクト

- **概要:**  
  エフェクトは、フラクタル描画の全体または特定の範囲に対して、特殊な視覚効果を適用する機能です。これにより、作品に深みや動きを加え、視覚的なインパクトを高めることができます。

- **サポートするエフェクト:**  
  - **ドロップシャドウ:**  
    - 影の方向、距離、ぼかし具合を調整し、立体感や深みを演出します。  
    - 光源の位置を調整可能で、影の角度を変更できます。  
  - **光彩（外側）:**  
    - オブジェクトの外側に柔らかな光を追加し、幻想的な効果を表現します。  
    - 光の色、強度、広がりを調整可能です。  
  - **透明度:**  
    - フラクタルの透明度を設定し、重なり合う色彩の微妙な表現を可能にします。  
    - 透明度は0%（不透明）から100%（完全に透明）まで調整可能です。

- **選択と調整方法:**  
  - パラメータパネル内に「エフェクト」セクションを設け、チェックボックスやドロップダウンリストからエフェクトを選択できます。  
  - 選択したエフェクトに応じて、必要なパラメータ（例：影の距離、光の強度）が動的に表示され、ユーザーがスライダーや入力フィールドで調整可能です。  
  - エフェクトの効果は、即時にキャンバスの描画に反映されます。

- **適用範囲:**  
  - デフォルトでは、フラクタル全体に適用されますが、将来的には特定の範囲（例：選択領域）への適用も検討します。

---
### 共通仕様

- **リアルタイム反映:**  
  - 描画モード、フィルター、エフェクトの選択やパラメータの調整は、すべてリアルタイムでキャンバスの描画に反映されます。これにより、ユーザーは調整の結果を即座に確認しながら作業を進められます。

- **保存と読み込み:**  
  - 描画モード、フィルター、エフェクトの設定は、プロジェクトファイル（例：JSON形式）に保存され、読み込み時に復元されます。これにより、作業の再開や共有が容易になります。

- **エラーハンドリング:**  
  - 無効なパラメータ入力（例：負の透明度）や、フィルターの強度が過剰な場合などに、適切なエラーメッセージ（例：「透明度は0%から100%の間で指定してください。」）を表示し、ユーザーに修正を促します。

- **パフォーマンス:**  
  - 描画モード、フィルター、エフェクトの計算は、簡易描画モードでは効率的なアルゴリズムを使用し、リアルタイム性を確保します。  
  - 高解像度レンダリング時には、選択された設定に基づき、詳細な計算を行い、品質を最大化します。

---
